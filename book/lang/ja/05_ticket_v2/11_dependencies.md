# 依存関係

パッケージは、`Cargo.toml`ファイルの`[dependencies]`セクションにリストすることで、他のパッケージに依存できます。  
依存関係を指定する最も一般的な方法は、名前とバージョンを提供することです：

```toml
[dependencies]
thiserror = "1"
```

これにより、パッケージに`thiserror`が**最小**バージョン`1.0.0`の依存関係として追加されます。  
`thiserror`は、Rustの公式パッケージレジストリである[crates.io](https://crates.io)から取得されます。  
`cargo build`を実行すると、`cargo`はいくつかの段階を経ます：

- 依存関係の解決
- 依存関係のダウンロード
- プロジェクトのコンパイル（独自のコードと依存関係）

プロジェクトに`Cargo.lock`ファイルがあり、マニフェストファイルが変更されていない場合、依存関係の解決はスキップされます。  
ロックファイルは、依存関係の解決が成功した後に`cargo`によって自動的に生成されます：プロジェクトで使用されるすべての依存関係の正確なバージョンが含まれ、異なるビルド間で同じバージョンが一貫して使用されることを保証するために使用されます（例：CI）。複数の開発者がいるプロジェクトで作業している場合は、`Cargo.lock`ファイルをバージョン管理システムにコミットすべきです。

`cargo update`を使用して、すべての依存関係の最新の（互換性のある）バージョンで`Cargo.lock`ファイルを更新できます。

### パス依存関係

**パス**を使用して依存関係を指定することもできます。これは、複数のローカルパッケージで作業している場合に便利です。

```toml
[dependencies]
my-library = { path = "../my-library" }
```

パスは、依存関係を宣言しているパッケージの`Cargo.toml`ファイルからの相対パスです。

### その他のソース

依存関係をどこから取得できるか、および`Cargo.toml`ファイルでそれらを指定する方法の詳細については、[Cargoドキュメント](https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html)を確認してください。

## 開発依存関係

開発にのみ必要な依存関係、つまり`cargo test`を実行するときにのみ取り込まれる依存関係を指定することもできます。  
これらは`Cargo.toml`ファイルの`[dev-dependencies]`セクションに配置されます：

```toml
[dev-dependencies]
static_assertions = "1.1.0"
```

テストを短縮するために、本書全体でこれらのいくつかを使用してきました。