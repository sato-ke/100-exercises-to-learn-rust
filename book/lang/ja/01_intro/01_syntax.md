# 構文

<div class="warning">

先に進まないでください！\
このセクションを開始する前に、前のセクションの演習を完了してください。\
それは[コースのGitHubリポジトリ](https://github.com/mainmatter/100-exercises-to-learn-rust)の`exercises/01_intro/00_welcome`にあります。\
[`wr`](00_welcome.md#wr-the-workshop-runner)を使用してコースを開始し、解答を検証してください。

</div>

前のタスクは演習とさえ言えませんが、すでにかなりのRustの**構文**に触れました。
前の演習で使用されたRustの構文のすべての詳細をカバーすることはしません。
代わりに、詳細にとらわれずに進み続けるために_十分な_内容だけをカバーします。\
一歩ずつ進みましょう！

## コメント

単一行コメントには`//`を使用できます：

```rust
// これは単一行コメントです
// 別の単一行コメントが続きます
```

## 関数

Rustの関数は`fn`キーワードを使用して定義され、その後に関数名、入力パラメータ、
戻り値の型が続きます。
関数の本体は中括弧`{}`で囲まれています。

前の演習では、`greeting`関数を見ました：

```rust
// `fn` <関数名> ( <入力パラメータ> ) -> <戻り値の型> { <本体> }
fn greeting() -> &'static str {
    // TODO: 修正してください 👇
    "I'm ready to __!"
}
```

`greeting`には入力パラメータがなく、文字列スライスへの参照（`&'static str`）を返します。

### 戻り値の型

関数が何も返さない場合（つまり、Rustのユニット型である`()`を返す場合）、
シグネチャから戻り値の型を省略できます。
これが`test_welcome`関数で起きたことです：

```rust
fn test_welcome() {
    assert_eq!(greeting(), "I'm ready to learn Rust!");
}
```

上記は以下と同等です：

```rust
// ユニット戻り値型を明示的に記述
//                   👇
fn test_welcome() -> () {
    assert_eq!(greeting(), "I'm ready to learn Rust!");
}
```

### 値を返す

関数の最後の式は暗黙的に返されます：

```rust
fn greeting() -> &'static str {
    // これは関数の最後の式です
    // したがって、その値は`greeting`によって返されます
    "I'm ready to learn Rust!"
}
```

`return`キーワードを使用して値を早期に返すこともできます：

```rust
fn greeting() -> &'static str {
    // 行末のセミコロンに注意してください！
    return "I'm ready to learn Rust!";
}
```

可能な場合は`return`キーワードを省略することが慣用的とされています。

### 入力パラメータ

入力パラメータは、関数名の後に続く括弧`()`の中で宣言されます。\
各パラメータは、その名前、コロン`:`、その型の順で宣言されます。

例えば、以下の`greet`関数は`&str`型（「文字列スライス」）の`name`パラメータを受け取ります：

```rust
// 入力パラメータ
//        👇
fn greet(name: &str) -> String {
    format!("Hello, {}!", name)
}
```

複数の入力パラメータがある場合は、カンマで区切る必要があります。

### 型注釈

「型」について何度か言及してきたので、明確に述べましょう：Rustは**静的型付け言語**です。\
Rustのすべての値には型があり、その型はコンパイル時にコンパイラに知られていなければなりません。

型は**静的解析**の一形態です。\
型を、プログラム内のすべての値にコンパイラが付ける**タグ**と考えることができます。タグに応じて、
コンパイラは異なるルールを強制できます—例えば、文字列を数値に加算することはできませんが、
2つの数値を加算することはできます。
正しく活用すれば、型は実行時のバグのクラス全体を防ぐことができます。